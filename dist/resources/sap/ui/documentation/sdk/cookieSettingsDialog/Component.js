/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Component","sap/ui/core/mvc/Controller","sap/ui/VersionInfo","sap/base/util/merge","sap/base/util/UriParameters"],function(e,t,i,o,n){"use strict";var e=e.extend("sap.ui.documentation.sdk.cookieSettingsDialog.Component",{COOKIE_NAMES:{APPROVAL_REQUESTED:"dk_approval_requested",ALLOW_REQUIRED_COOKIES:"dk_allow_required_cookies",ALLOW_USAGE_TRACKING:"dk_allow_usage_tracking"},SWA_CONFIG:{pubToken:"d5a5359b-0b55-415c-acc8-314511b613ca",baseUrl:"https://webanalytics2.cfapps.eu10.hana.ondemand.com/tracker/",owner:null},SWA_TRACKER_URL:"sap/webanalytics/core/tracker/js/track.js",metadata:{manifest:"json"},enable:function(e){var t=n.fromQuery(location.search),o="cookie-settings-dialog",s=t.has(o);if(s){this.sCookieSettingsParameterValue=t.get(o)}if(this.sCookieSettingsParameterValue==="true"||this.sCookieSettingsParameterValue===""||!s){i.load().then(function(t){var i=t.libraries.some(function(e){return e.name==="sap.webanalytics.core"}),o=this.getCookieValue(this.COOKIE_NAMES.APPROVAL_REQUESTED)==="1",n=this.getCookieValue(this.COOKIE_NAMES.ALLOW_USAGE_TRACKING)==="1";if(!o){this.cookieSettingsDialogOpen({showCookieDetails:false,supportsUsageTracking:i},e)}if(i&&n){this.enableUsageTracking()}}.bind(this))}},setCookie:function(e,t){var i,o=new Date;o.setTime(o.getTime()+356*24*60*60*1e3);i="expires="+o.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"},getCookieValue:function(e){var t=document.cookie.split(";"),i;e=e+"=";for(var o=0;o<t.length;o++){i=t[o].trim();if(i.indexOf(e)===0){return i.substring(e.length,i.length)}}return""},enableUsageTracking:function(){this._loadSWA().then(function(e){if(e&&typeof e.enable==="function"){e.enable()}})},disableUsageTracking:function(){var e=window["swa"];if(e&&typeof e.disable==="function"){e.disable()}},_loadSWA:function(){if(!this._oPromiseLoadSWA){this._oPromiseLoadSWA=new Promise(function(e,t){var i=o({},this.SWA_CONFIG),n=document,s=n.createElement("script"),a=n.getElementsByTagName("script")[0];s.type="text/javascript";s.defer=true;s.async=true;s.src=sap.ui.require.toUrl(this.SWA_TRACKER_URL);window.addEventListener("swaLoadSuccess",function(){e(window["swa"])});a.parentNode.insertBefore(s,a);window["swa"]=i}.bind(this))}return this._oPromiseLoadSWA},cookieSettingsDialogOpen:function(e,t){this.getCookieSettingsController().then(function(i){i.openCookieSettingsDialog(e,t,this)}.bind(this))},getCookieSettingsController:function(){if(!this.oCookieSettingsControllerPromise){this.oCookieSettingsControllerPromise=new Promise(function(e,i){t.create({name:"sap.ui.documentation.sdk.cookieSettingsDialog.controller.CookieSettingsDialog"}).then(function(t){e(t)})})}return this.oCookieSettingsControllerPromise}});return e});