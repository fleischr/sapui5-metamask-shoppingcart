/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/documentation/sdk/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/documentation/sdk/controller/util/JSDocUtil","sap/ui/documentation/sdk/controller/util/APIInfo","sap/ui/documentation/sdk/model/formatter"],function(e,t,i,a,n,o){"use strict";return t.extend("sap.ui.documentation.sdk.controller.ApiDetailIndexDeprecatedExperimental",{formatter:o,onInit:function(){var e=this.getRouter();this._oModel=new i;this._oModel.setSizeLimit(1e4);this.setModel(this._oModel);e.getRoute("deprecated").attachPatternMatched(this._onTopicMatched,this);e.getRoute("experimental").attachPatternMatched(this._onTopicMatched,this);e.getRoute("since").attachPatternMatched(this._onTopicMatched,this);this._hasMatched=false},_onTopicMatched:function(e){var t=e.getParameter("name"),i={experimental:n.getExperimentalPromise,deprecated:n.getDeprecatedPromise,since:n.getSincePromise}[t];if(this._hasMatched){return}this._hasMatched=true;this._aAllowedMembers=this.getModel("versionData").getProperty("/allowedMembers");i().then(function(e){e=this._filterVisibleElements(e);this._oModel.setData(e)}.bind(this))},_filterVisibleElements:function(e){var t={};Object.keys(e).forEach(function(i){var a=e[i];a.apis=a.apis.filter(function(e){return this._aAllowedMembers.indexOf(e.visibility)>-1}.bind(this));if(a.apis.length>0){t[i]=a}}.bind(this));return t},_modifyLinks:function(e){var t=e.getSource().getItems(),i=t.length,a;while(i--){a=t[i];if(a._getLinkSender){var n=a.getCustomData(),o=n[0].getValue(),s=n[1].getValue(),r=n[2].getValue(),l;if(n[3].getValue()){s=o+"."+s}l="api/"+o;if(r!=="class"){l+="/"+r+"/"+s}a._getLinkSender().setHref(l)}}}})});