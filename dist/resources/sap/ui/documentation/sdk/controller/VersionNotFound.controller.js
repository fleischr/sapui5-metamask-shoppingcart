/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./BaseController","sap/ui/thirdparty/URI","sap/m/library"],function(e,t,n){"use strict";return e.extend("sap.ui.documentation.sdk.controller.VersionNotFound",{onInit:function(){this._loadVersionInfo().then(this._onVersionInfo.bind(this)).catch(this._onError.bind(this))},onReadMore:function(){n.URLHelper.redirect("https://blogs.sap.com/2021/01/26/removing-outdated-ui5-versions-from-ui5-cdn/")},onHomePress:function(){n.URLHelper.redirect("/")},_onError:function(){var e=this.getView().byId("page");e.setBusy(false);e.setText(this._getLibraryResourceBundle().getText("NOT_FOUND_UNAVAILABLE_TEXT"))},_onVersionInfo:function(e){var n=this.getView().byId("page"),r=this.getView().byId("readMoreButton"),o=new RegExp("^([0-9]+)(?:\\.([0-9]+)(?:\\.([0-9]+))?)?(.+)?"),i=new t(document.location.href),s=i.segment(),u,a=false;n.setBusy(false);for(var c=0,d=s.length;c<d;c++){if(o.test(s[c])){u=s[c];break}}a=this._isVersionRemoved(e,u);if(a){n.setText(this._getLibraryResourceBundle().getText("NOT_FOUND_REMOVED_TEXT"));r.setVisible(true)}else{r.setVisible(false);n.setText(this._getLibraryResourceBundle().getText("NOT_FOUND_UNAVAILABLE_TEXT"))}},_isVersionRemoved:function(e,t){var n=e.patches,r,o;r=n.findIndex(function(e){o=new RegExp(e.version);return e.removed&&o.test(t)});return r>-1},_getLibraryResourceBundle:function(){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.documentation")},_loadVersionInfo:function(){return new Promise(function(e,t){jQuery.ajax({async:true,url:"/versionoverview.json",dataType:"json",success:function(t){e(t)},error:function(e){t(e)}})})}})});