/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./BaseController","./util/TreeUtil","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i,l,o){"use strict";var n=300;var r=t.extend("sap.ui.documentation.sdk.controller.MasterTreeBaseController",{_initTreeUtil:function(e,t){this._oTreeUtil=new i(e,t)},_expandTreeToNode:function(e,t){var i=this.byId("tree"),l=t.getData();var o=this._oTreeUtil.getPathToNode(e,l);var n;o.forEach(function(e){var t=this._findTreeItem(e);if(t){i.getBinding("items").expand(i.indexOfItem(t));n=t}},this);if(n){n.setSelected(true);this.oSelectedItem={sTopicId:e,oModel:t};setTimeout(function(){if(n.getDomRef()&&!s(n.getDomRef())){this._scrollTreeItemIntoView(n)}}.bind(this),0)}},_findTreeItem:function(e){var t=this.byId("tree").getItems();for(var i=0;i<t.length;i++){if(t[i].getTarget()===e){return t[i]}}return null},_scrollTreeItemIntoView:function(e){var t=this.byId("page");t.scrollToElement(e.getDomRef(),n)},onTreeFilter:function(e){this._sFilter=e.getParameter("newValue").trim();if(this._filterTimeout){clearTimeout(this._filterTimeout)}this._filterTimeout=setTimeout(function(){if(this.buildAndApplyFilters()){this._expandAllNodes()}else{this._collapseAllNodes();if(this.oSelectedItem){this._expandTreeToNode(this.oSelectedItem.sTopicId,this.oSelectedItem.oModel)}}this._filterTimeout=null}.bind(this),250)},buildAndApplyFilters:function(){var e=this.byId("tree").getBinding("items");if(this._sFilter){e.filter(new l({path:"name",operator:o.Contains,value1:this._sFilter}));return true}else{e.filter();return false}},_expandAllNodes:function(){this.byId("tree").expandToLevel(10)},_collapseAllNodes:function(){this.byId("tree").collapseAll()},_clearSelection:function(){var e=this.byId("tree").getItems();if(e.length){e[0].setSelected(false)}},onTreeExpandAll:function(e){this._expandAllNodes()},onTreeCollapseAll:function(e){this._collapseAllNodes()}});function s(t){var i=t.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=e(document).height()&&i.right<=e(document).width()}return r});